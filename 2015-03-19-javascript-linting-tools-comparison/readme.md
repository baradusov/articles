# Линтинг JavaScript: сравниваем инструменты для проверки кода

> Это перевод статьи [A Comparison of JavaScript Linting Tools](https://www.sitepoint.com/comparison-javascript-linting-tools/) Яни Хартикайнена.

Инструменты для проверки кода помогают мне избежать глупых ошибок. Несмотря на мой многолетний опыт, я всё ещё печатаю имена переменных неправильно, делаю синтаксические ошибки и забываю о правильной обработке исключений.

Существует множество линтеров для JavaScript, но какой из них выбрать? Давайте взглянем на возможности и плюсы/минусы четырёх популярных линтеров: [JSLint](http://www.jslint.com/), [JSHint](http://jshint.com/), [JSCS](http://jscs.info/) и [ESLint](http://eslint.org/).

## Общие сведения

Принцип работы выбранных нами инструментов похож. Они имеют набор правил, используемых для анализа ошибок и потенциальных проблем в JavaScript-файлах. Данные инструменты можно установить через npm. Они могут использоваться в командной строке, в виде плагина для Grunt или тому подобного инструмента, а также они могут быть интегрированы в редактор кода. Все из них поддерживают использование комментариев для конфигурации.

Но на этом схожесть заканчивается. Каждый инструмент имеет собственные преимущества и недостатки.

## JSLint

JSLint — самый старый из нашей четвёрки. Его создал Дуглас Крокфорд в 2002 году, чтобы следить за использованием лучших (на его взгляд) практик в коде. Если вы согласны с этими лучшими практиками, JSLint может оказаться для вас хорошим инструментом.

Преимущества:

* Поставляется полностью готовым к использованию (если вы согласны с прописанными в нём правилами по умолчанию)

Недостатки:

* JSLint не имеет файла конфигурации, что может стать проблемой если вам потребуется поменять настройки
* Ограниченное количество конфигурируемых параметров, некоторые правила не могут быть отключены
* Нельзя добавлять собственные правила
* Недокументированные возможности
* Трудно понять, что именно нарушает правило

## JSHint

JSHint позиционируется как более настраиваемая версия JSLint (он является его форком). Вы можете настроить каждое правило и поместить ваши настройки в файл конфигурации. Это упрощает использование JSHint в крупных проектах. JSHint также имеет хорошую документацию для каждого из правил, так что вы точно будете знать, что делает то или иное правило.

Небольшой недостаток JSHint заключается в том, что он поставляется с несколько скудной конфигурацией по умолчанию. Это означает, что вам придётся повозиться с настройками перед использованием. Также в сравнении с ESLint немного сложно понять, какие правила следует поменять, чтобы включить или отключить определённые сообщения об ошибках.

Преимущества:

* Большинство параметров может быть настроено
* Поддерживает файл конфигурации, что облегчает использование этого инструмента в крупных проектах
* Из коробки поддерживает многие библиотеки вроде jQuery, QUnit, NodeJS, Mocha
* Базовая поддержка ES6

Недостатки:

* Тяжело понять, что именно вызывает ошибку
* Есть два режима работы: строгий и мягкий (могут быть использованы, чтобы сделать JSHint строже или наоборот чтобы подавить его предупреждения). Это может немного запутать вас в процессе конфигурирования
* Нет поддержки пользовательских правил

## JSCS

JSCS отличается от остальных инструментов тем, что он ничего не сможет сделать без файла конфигурации. Вы можете скачать готовые конфигурации с его сайта, так что это не такая серьёзная проблема. К тому же для него доступно некоторое количество пресетов вроде стайлгайда по кодингу jQuery.

JSCS имеет более 90 различных правил, и вы можете создавать свои собственные с помощью плагинов. JSCS также поддерживает пользовательский формат выдачи предупреждений, так что интеграция с другими инструментами становится проще.

JSCS — это инструмент для проверки стиля кода. Это значит, что он отслеживает только проблемы, связанные с форматированием кода, и не отслеживает потенциальные баги и ошибки. Поэтому он менее гибок, чем остальные инструменты. Однако если вам требуется следовать определённому стилю кода, JSCS хорошо справится с этой работой.

Преимущества:

* Поддерживает пользовательский формат выдачи предупреждений
* Есть большое количество готовых пресетов и конфигурационных файлов
* Может быть расширен дополнительными плагинами

Недостатки:

* Следит только за стилем кода. JSCS не определяет потенциальные баги вроде неиспользуемых переменных
* Самый медленный из всех, но это не проблема при обычном использовании

## ESLint

ESLint — самый новый инструмент из всех четырёх. Он был спроектирован с расчётом на расширяемость, он поставляется с большим количеством пользовательских правил, также для него существует множество плагинов. Следует отметить, что его сообщения весьма лаконичны и информативны, так как он включает в них название правила, которое было нарушено.

Документация ESlint немного неаккуратна. Список правил составлен хорошо и разбит на группы, но инструкции по настройке местами могут вас озадачить. Зато в одном месте собраны ссылки на плагины, примеры и инструкции по интеграции с редакторами.

Преимущества:

* Гибкость: каждое правило может быть отключено, множество правил имеют дополнительные опции
* Расширяемость — доступно большое количество плагинов
* Простой для понимания вывод отчётов
* Имеет правила, которых нет в других линтерах, что делает этот инструмент более полезным для обнаружения проблем
* Лучшая поддержка ES6, а также единственная в своём роде поддержка JSX
* Поддержка пользовательского формата выдачи отчётов

Недостатки:

* Требует небольшой настройки
* Медленный, но это не является сильной помехой

## Мои рекомендации

Мой выбор — ESLint. JSLint слишком строг и его нельзя настроить, а в JSHint нет возможности расширения фунционала. JSCS — хороший выбор только если вам требуется проверять стиль кода, в то время как ESLint проверяет и стиль кода, и потенциальные баги и проблемы.

Также ESLint является наиболее очевидным выбором если вы хотите использовать ES6 (или ES2015, как его теперь следует называть). Из всех упомянутых инструментов именно в ESLint самая обширная поддержка возможностей новой спецификации.

JSHint тоже неплохой выбор. Если вам не требуются продвинутые возможности ESLint, то JSHint тоже неплохо справится со своей работой при условии того, что вы его уже настроили. JSCS с его огромным набором доступных правил будет отличным решением для проверки стиля кода (отступы, кавычки и всё, что связано с форматированием).

Я не решаюсь рекомендовать JSLint. Другие инструменты умеют то же самое, но при этом они не навязывают пользователю специфические правила. Единственным исключением является тот случай, когда эти правила вас полностью устраивают — тогда JSLint будет для вас неплохим выбором.

А как вы контролируете качество кода?
